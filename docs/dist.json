{
  "openapi": "3.0.0",
  "info": {
    "title": "Mock Accounts API",
    "description": "A mock up of an account management API.",
    "version": "1.0.0",
    "contact": {
      "name": "Ashley Kinard",
      "email": "ashleymkinard@gmail.com",
      "url": "https://ashleykinard.pro/"
    }
  },
  "servers": [
    {
      "url": "https://example.com"
    }
  ],
  "security": [
    {
      "userApiKey": []
    }
  ],
  "tags": [
    {
      "name": "Accounts",
      "description": "Endpoints that manage user accounts."
    },
    {
      "name": "Product Licenses",
      "description": "Endpoints that manage product licenses."
    }
  ],
  "paths": {
    "/account/{accountId}/license": {
      "post": {
        "summary": "Add a license to an account",
        "description": "Adds a new product license to the given account ID.",
        "operationId": "addAccountLicense",
        "tags": [
          "Accounts",
          "Product Licenses"
        ],
        "requestBody": {
          "$ref": "#/components/requestBodies/modifyAccountLicense"
        },
        "responses": {
          "200": {
            "$ref": "#/components/responses/addAccountLicense"
          },
          "400": {
            "description": "Invalid input parameter."
          }
        }
      },
      "parameters": [
        {
          "$ref": "#/components/parameters/accountId"
        }
      ]
    },
    "/account/{accountId}/{licenseId}": {
      "get": {
        "summary": "Get an account's license",
        "description": "Returns an account's product license information.",
        "operationId": "getAccountLicense",
        "tags": [
          "Accounts",
          "Product Licenses"
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/getAccountLicense"
          },
          "400": {
            "description": "400 Bad Request"
          }
        }
      },
      "put": {
        "summary": "Update an account's license",
        "description": "Updates the status of an account's license.",
        "operationId": "updateAccountLicense",
        "tags": [
          "Accounts",
          "Product Licenses"
        ],
        "responses": {
          "200": {
            "$ref": "#/components/responses/updateAccountLicense"
          },
          "400": {
            "description": "Invalid input parameter."
          }
        }
      },
      "parameters": [
        {
          "$ref": "#/components/parameters/accountId"
        },
        {
          "$ref": "#/components/parameters/licenseId"
        }
      ]
    }
  },
  "components": {
    "securitySchemes": {
      "userApiKey": {
        "type": "apiKey",
        "in": "header",
        "name": "api-key"
      }
    },
    "schemas": {
      "accountId": {
        "type": "integer",
        "example": 89021278386
      },
      "accountLicenseStatus": {
        "type": "object",
        "description": "Information about the account license operation.",
        "properties": {
          "status": {
            "type": "string",
            "description": "The license operation's status:\n- `added` — The license was added to the account.\n- `removed` — The license was removed from the account.\n- `transferred` — The license was transferred to the account.\n",
            "enum": [
              "added",
              "removed",
              "transferred"
            ],
            "example": "added"
          },
          "message": {
            "type": "string",
            "description": "The operation's message.",
            "example": "License '7d56bd9d-a642-4fee-9700-0c5c60c98e26' ('personal') added to account 89021278386"
          },
          "license": {
            "type": "object",
            "description": "Information about the license.",
            "properties": {
              "id": {
                "type": "string",
                "description": "The license's ID.",
                "example": "7d56bd9d-a642-4fee-9700-0c5c60c98e26"
              },
              "type": {
                "type": "string",
                "description": "The type of license:\n- `personal` — A personal account license.\n- `corporate` — A corporate account license.\n- `trial` — A trial account license.\n",
                "enum": [
                  "personal",
                  "corporate",
                  "trial"
                ],
                "example": "personal"
              },
              "accountId": {
                "type": "integer",
                "description": "The account's ID.",
                "example": 89021278386
              }
            }
          },
          "notes": {
            "type": "string",
            "description": "Notes about the account's license.",
            "example": "upgraded from trial"
          }
        }
      },
      "licenseId": {
        "type": "string",
        "format": "uid",
        "example": "7d56bd9d-a642-4fee-9700-0c5c60c98e26"
      },
      "getAccountLicense": {
        "type": "object",
        "properties": {
          "data": {
            "type": "object",
            "properties": {
              "username": {
                "type": "string",
                "format": "username",
                "description": "The account's username.",
                "example": "example.user"
              },
              "accountId": {
                "type": "integer",
                "description": "The account's ID.",
                "example": 89021278386
              },
              "id": {
                "type": "string",
                "format": "uid",
                "description": "The account's license ID.",
                "example": "7d56bd9d-a642-4fee-9700-0c5c60c98e26"
              },
              "type": {
                "type": "string",
                "description": "The type of license:\n- `personal` — A personal account license.\n- `corporate` — A corporate account license.\n- `trial` — A trial account license.\n",
                "enum": [
                  "personal",
                  "corporate",
                  "trial"
                ],
                "example": "personal"
              },
              "notes": {
                "type": "string",
                "description": "Internal notes about the account's license.",
                "example": "Upgraded from trial license."
              }
            }
          }
        }
      }
    },
    "parameters": {
      "accountId": {
        "name": "accountId",
        "in": "path",
        "description": "The user account ID.",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/accountId"
        }
      },
      "licenseId": {
        "name": "licenseId",
        "in": "path",
        "description": "The license's unique ID.",
        "required": true,
        "schema": {
          "$ref": "#/components/schemas/licenseId"
        }
      }
    },
    "requestBodies": {
      "modifyAccountLicense": {
        "content": {
          "application/json": {
            "schema": {
              "required": [
                "licenseId"
              ],
              "type": "object",
              "properties": {
                "licenseId": {
                  "type": "string",
                  "format": "uid",
                  "description": "The license's ID.",
                  "example": "7d56bd9d-a642-4fee-9700-0c5c60c98e26"
                },
                "status": {
                  "type": "string",
                  "description": "The license operation's status:\n- `add` — Add the license to the account.\n- `remove` — Remove the license from the account.\n",
                  "enum": [
                    "add",
                    "remove"
                  ],
                  "example": "add"
                },
                "notes": {
                  "type": "string",
                  "description": "An optional note about the license.",
                  "example": "upgraded from trial"
                }
              }
            }
          }
        }
      }
    },
    "responses": {
      "addAccountLicense": {
        "description": "License Added",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/accountLicenseStatus"
            },
            "example": {
              "status": "added",
              "message": "License '7d56bd9d-a642-4fee-9700-0c5c60c98e26' ('personal') added to account 89021278386",
              "license": {
                "id": "7d56bd9d-a642-4fee-9700-0c5c60c98e26",
                "type": "personal",
                "accountId": 89021278386
              },
              "notes": "upgraded from trial license"
            }
          }
        }
      },
      "getAccountLicense": {
        "description": "Successful Response",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/getAccountLicense"
            }
          }
        }
      },
      "updateAccountLicense": {
        "description": "License Removed",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/accountLicenseStatus"
            },
            "example": {
              "status": "removed",
              "message": "Removed license '7d56bd9d-a642-4fee-9700-0c5c60c98e26' from account 89021278386",
              "license": {
                "id": "7d56bd9d-a642-4fee-9700-0c5c60c98e26",
                "type": "personal",
                "accountId": 89021278386
              },
              "notes": "removed due to license violation"
            }
          }
        }
      }
    }
  }
}